<app-page-header pageTitle="Archives"></app-page-header>

<ion-content [fullscreen]="true" class="archives-page">
  <div class="archives-container">
    <!-- Loading State -->
    <div class="loading-container" *ngIf="isLoading">
      <ion-spinner></ion-spinner>
      <p>Loading archived articles...</p>
    </div>

    <!-- Archived Articles List -->
    <div class="archived-articles-section" *ngIf="!isLoading">
      <div class="section-header">
        <h2>Archived Articles</h2>
        <p class="section-description">
          These articles are preserved from earlier versions of DCCI Ministries and are presented here as part of the ministry archive.
        </p>
      </div>

      <div class="articles-list" *ngIf="archivedArticles.length > 0">
        <div class="results-count">
          Showing {{ archivedArticles.length }} archived article{{ archivedArticles.length !== 1 ? 's' : '' }}
        </div>

        <div class="article-card" *ngFor="let article of archivedArticles" (click)="navigateToArticle(article.slug!)">
          <div class="article-thumbnail" *ngIf="getThumbnailUrl(article)">
            <img [src]="getThumbnailUrl(article)" [alt]="article.title">
          </div>
          <div class="article-info">
            <h3 class="article-title">{{ article.title }}</h3>
            <div class="article-meta">
              <time class="article-date">
                {{ getDateString(article.publishedAt || article.createdAt) }}
              </time>
            </div>
            <p class="article-excerpt" *ngIf="article.excerpt">
              {{ article.excerpt }}
            </p>
          </div>
        </div>
      </div>

      <div class="empty-state" *ngIf="archivedArticles.length === 0 && !isLoading">
        <ion-icon name="archive-outline"></ion-icon>
        <p>No archived articles available</p>
      </div>
    </div>

    <!-- Wayback Machine Section -->
    <div class="wayback-section" *ngIf="!isLoading">
      <div class="wayback-card">
        <ion-icon name="archive-outline" class="wayback-icon"></ion-icon>
        <h3>Access Our Previous Content</h3>
        <p>
          While we're upgrading, you can still access our previous website content through the
          Internet Archive's Wayback Machine. We have a complete snapshot from December 6, 2022
          that shows our full website with all articles, categories, and resources.
        </p>

        <div class="wayback-links">
          <a href="https://web.archive.org/web/20221206091448/https://www.dcciministries.com/"
             target="_blank"
             rel="noopener noreferrer"
             class="wayback-button primary">
            <ion-icon name="open-outline"></ion-icon>
            Visit December 2022 Archive
          </a>

          <a href="https://web.archive.org/web/20210000000000*/https://dcciministries.com"
             target="_blank"
             rel="noopener noreferrer"
             class="wayback-button secondary">
            <ion-icon name="open-outline"></ion-icon>
            Browse All Archives
          </a>
        </div>

        <p class="wayback-note">
          <ion-icon name="information-circle-outline" class="wayback-icon"></ion-icon>
          The Wayback Machine preserves historical snapshots of websites, allowing you to browse
          our previous content while we complete the upgrade.
        </p>
      </div>
    </div>
    
    <!-- Footer -->
    <app-footer [version]="version"></app-footer>
  </div>
</ion-content>


